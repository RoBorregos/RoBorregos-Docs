# Autonomous Navigation
@Home relies on a good autonomous navigation. The competition environment is a small house in which the robot must move around by itself, being able to reach all the rooms or places requested by the task or, alternatively, to follow the human's order (e.g., follow him).

## Mapping
In @Home we are allowed to previously map the area, a map that the robot will use for its future self-localization. ROS has several tools for mapping, in this case we use Gmapping.

Gmapping is a tool used in robotics for mapping an unknown environment while a robot is moving within it. Gmapping uses sensor measurements, like laser scans or RGB-D data, to create a two-dimensional occupancy grid map. This map represents the likelihood of obstacles or free space in each grid cell.

The algorithm behind gmapping is based on FastSLAM, which uses a particle filter approach. It estimates the robot's position and orientation (pose) and the positions of landmarks in the environment. The algorithm updates and resamples particles based on sensor data and odometry information to improve the map and pose estimates.

## Navigation
The second part of this autonomous navigation is to set up the navigation parameters, and for that we use NavStack. The ROS Navigation Stack is a collection of software packages that you can use to help your robot move from a starting location to a goal location safely.

![NavStack](/docs/assets/home/Nav/navstack.png)

The navigation stack as shown in the photo, consists of several key components:

1. Map Server: The map server provides a pre-built map of the environment to the navigation stack. It typically uses maps generated by tools like gmapping or other mapping algorithms. The map server makes the map available to other components in the navigation stack.

2. Localization: Localization is the process of determining the robot's position within the map. The navigation stack uses algorithms like AMCL (Adaptive Monte Carlo Localization) to estimate the robot's pose based on sensor data, such as laser scans or visual odometry.

3. Path Planning: Path planning involves finding a feasible and collision-free path from the robot's current position to its goal position. The navigation stack utilizes algorithms like Dijkstra's algorithm or A* (A-star) to generate a path through the map. It takes into account obstacles, the robot's size, and any other relevant constraints.
    1. Global Path Planning: The global planner generates a high-level path from the robot's current position to its desired goal position. It takes into account the global map of the environment and considers factors such as obstacles, the robot's dimensions, and any specified constraints. The global planner typically uses algorithms like Dijkstra's algorithm or A* (A-star) to find an optimal or near-optimal path.

    2. Local Obstacle Avoidance: The local planner focuses on obstacle avoidance at the local level. It takes the global path generated by the global planner and adjusts it in real-time to avoid dynamic obstacles or unexpected obstacles that may appear along the way. The local planner continuously evaluates the sensor data, such as laser scans or depth images, to generate a safe and feasible trajectory for the robot.

4. Obstacle Avoidance: Obstacle avoidance ensures that the robot can navigate around obstacles encountered during its path execution. It utilizes sensor data, such as laser scans, to detect and avoid obstacles. The navigation stack can employ algorithms like the Dynamic Window Approach or Elastic Bands to perform real-time obstacle avoidance.

5. Motion Control: Motion control deals with generating and executing control commands to move the robot along the planned path. It considers the robot's kinematics, dynamics, and other constraints to ensure accurate and smooth motion. The navigation stack interfaces with the robot's low-level control system, such as motor controllers or velocity controllers, to execute the desired motions.

These components work together in a coordinated manner within the navigation stack to enable autonomous navigation. This package takes into account the robot's current pose, the map of the environment, and sensor inputs to generate a safe and efficient trajectory for the robot to follow. It continuously updates the robot's position, plans new paths if necessary, and adjusts motion commands to ensure successful navigation while avoiding obstacles.

By utilizing the navigation stack, robots can autonomously navigate complex environments, such as indoor spaces or outdoor terrains, by planning paths, localizing themselves, avoiding obstacles, and executing motion commands based on sensor data and map information.

<br/>
<br/>

### With a good map, an excellent configuration of the parameters in NavStack and a good record of the information from the sensors, an autonomous navigation is obtained, always improvable, in search of the balance between efficiency in avoiding obstacles and reaching the destination point with the time of arrival at the destination.

<br/>
<br/>

- [Progress so far](progress.md)